/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{var t={731:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return n&&i(a,n.prototype),a}(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var u=function(n){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,n,r){return n=a(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(n,r||[],a(e).constructor):n.apply(e,r))}(this,r,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,n),u=r,(c=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){this.innerHTML="\n      <footer>\n        <p>ARiMa OurStory App &copy; 2025</p>\n      </footer>\n    "}}])&&e(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,c}(r(HTMLElement));customElements.define("footer-bar",u)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{"use strict";const t={setUser:function(t){var e=t.userId,n=t.name,r=t.token;sessionStorage.setItem("userId",e),sessionStorage.setItem("userName",n),sessionStorage.setItem("userToken",r)},getUser:function(){return{userId:sessionStorage.getItem("userId"),userName:sessionStorage.getItem("userName"),token:sessionStorage.getItem("userToken")}},getToken:function(){return sessionStorage.getItem("userToken")},isUserLoggedIn:function(){return!!this.getToken()},logout:function(){sessionStorage.clear(),window.location.hash="#/login",location.reload()}};function e(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null}}function r(){return location.hash.replace("#","")||"/"}function o(){return t=e(r()),n="",t.resource&&(n=n.concat("/".concat(t.resource))),t.id&&(n=n.concat("/:id")),n||"/";var t,n}function i(){return e(r())}const a="https://story-api.dicoding.dev/v1",u="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return s(f,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),f}var a={};function u(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),y=l.prototype=u.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=l,s(y,"constructor",l),s(l,"constructor",f),f.displayName="GeneratorFunction",s(l,o,"GeneratorFunction"),s(y),s(y,o,"Generator"),s(y,r,function(){return this}),s(y,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m:v}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function i(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},s(t,e,n,r)}function f(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){f(i,r,o,a,u,"next",t)}function u(t){f(i,r,o,a,u,"throw",t)}a(void 0)})}}const p={register:function(t){return l(c().m(function e(){var n,r,o,i;return c().w(function(e){for(;;)switch(e.n){case 0:return n=t.name,r=t.email,o=t.password,e.n=1,fetch(a+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:r,password:o})});case 1:return i=e.v,e.a(2,i.json())}},e)}))()},login:function(e){return l(c().m(function n(){var r,o,i,u;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.email,o=e.password,n.n=1,fetch(a+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});case 1:return i=n.v,n.n=2,i.json();case 2:return(u=n.v).error||t.setUser(u.loginResult),n.a(2,u)}},n)}))()},getAllStories:function(){var e=arguments;return l(c().m(function n(){var r,o,i,u;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:10,n.n=1,fetch("".concat(a,"/stories?page=").concat(r,"&size=").concat(o),{headers:{Authorization:"Bearer ".concat(t.getToken())}});case 1:return i=n.v,n.n=2,i.json();case 2:return u=n.v,n.a(2,u.listStory)}},n)}))()},getStoryDetail:function(e){return l(c().m(function n(){var r,o;return c().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,fetch("".concat(a,"/stories/").concat(e),{headers:{Authorization:"Bearer ".concat(t.getToken())}});case 1:return r=n.v,n.n=2,r.json();case 2:return o=n.v,n.a(2,o.story)}},n)}))()},addNewStory:function(e){return l(c().m(function n(){var r,o,i,u,s,f;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.description,o=e.photo,i=e.lat,u=e.lon,(s=new FormData).append("description",r),s.append("photo",o),i&&s.append("lat",i),u&&s.append("lon",u),n.n=1,fetch(a+"/stories",{method:"POST",headers:{Authorization:"Bearer ".concat(t.getToken())},body:s});case 1:return f=n.v,n.a(2,f.json())}},n)}))()},subscribeNotification:function(e){return l(c().m(function n(){var r,o;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.toJSON(),n.n=1,fetch(a+"/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.getToken())},body:JSON.stringify({endpoint:r.endpoint,keys:{p256dh:r.keys.p256dh,auth:r.keys.auth}})});case 1:return o=n.v,n.a(2,o.json())}},n)}))()}};function y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return v(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(v(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,v(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,v(l,"constructor",s),v(s,"constructor",c),c.displayName="GeneratorFunction",v(s,o,"GeneratorFunction"),v(l),v(l,o,"Generator"),v(l,r,function(){return this}),v(l,"toString",function(){return"[object Generator]"}),(y=function(){return{w:i,m:p}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){function i(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},v(t,e,n,r)}function d(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){d(i,r,o,a,u,"next",t)}function u(t){d(i,r,o,a,u,"throw",t)}a(void 0)})}}const h={init:function(){return b(y().m(function t(){return y().w(function(t){for(;;)switch(t.n){case 0:if("Notification"in window){t.n=1;break}return console.log("Browser does not support notifications."),t.a(2);case 1:if("serviceWorker"in navigator){t.n=2;break}return console.log("Browser does not support service workers."),t.a(2);case 2:if("PushManager"in window){t.n=3;break}return console.log("Browser does not support Push API."),t.a(2);case 3:return t.a(2)}},t)}))()},requestNotificationPermission:function(){return b(y().m(function t(){return y().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Notification.requestPermission();case 1:if("granted"===t.v){t.n=2;break}throw console.log("Notification permission not granted."),new Error("Notification permission not granted.");case 2:return t.a(2)}},t)}))()},subscribe:function(){var t=this;return b(y().m(function e(){var n,r,o;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.requestNotificationPermission();case 1:return e.n=2,navigator.serviceWorker.ready;case 2:return n=e.v,e.n=3,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlBase64ToUint8Array(u)});case 3:return r=e.v,e.n=4,p.subscribeNotification(r);case 4:console.log("Successfully subscribed to notifications."),alert("Anda berhasil subscribe notifikasi!"),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Failed to subscribe to notifications:",o),alert("Gagal melakukan subscribe. Pastikan Anda mengizinkan notifikasi.");case 6:return e.a(2)}},e,null,[[0,5]])}))()},_urlBase64ToUint8Array:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}function S(t){var e="function"==typeof Map?new Map:void 0;return S=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(k())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&j(o,n.prototype),o}(t,arguments,O(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),j(n,t)},S(t)}function k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(k=function(){return!!t})()}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}var _=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e,n){return e=O(e),function(t,e){if(e&&("object"==m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k()?Reflect.construct(e,n||[],O(t).constructor):e.apply(t,n))}(this,n,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(n,e),o=n,(i=[{key:"connectedCallback",value:function(){var t=this;this.render(),this._setupEventListeners(),this._highlightActiveLink(),window.addEventListener("hashchange",function(){return t._highlightActiveLink()})}},{key:"render",value:function(){var e=t.isUserLoggedIn();this.innerHTML='\n      <div class="app-bar">\n        <div class="app-bar__brand"> <a href="#/"><h1>OurStory</h1></a> </div>\n        <button class="app-bar__menu-button" id="menu-button" aria-label="Open Navigation Menu">☰</button>\n        <nav class="app-bar__navigation" id="navigation-drawer">\n          <ul>\n            <li><a href="#/stories">Story</a></li>\n            <li><a href="#/favorites">Favorit</a></li>\n            <li><a href="#/about">About</a></li>\n            '.concat(e?'\n              <li><a href="#/add-story">Add Story</a></li>\n              <li><button id="subscribe-button" class="btn-subscribe" title="Subscribe to Notifications"><i class="fas fa-bell"></i></button></li>\n              <li><button id="logout-button" class="btn-logout"><i class="fas fa-sign-out-alt"></i> Keluar</button></li>\n            ':'\n              <li><a href="#/login">Login</a></li>\n              <li><a href="#/register">Register</a></li>\n            ',"\n          </ul>\n        </nav>\n      </div>\n    "),e&&(this.querySelector("#logout-button").addEventListener("click",t.logout),this.querySelector("#subscribe-button").addEventListener("click",function(){h.subscribe()}))}},{key:"_setupEventListeners",value:function(){var t=this.querySelector("#menu-button"),e=this.querySelector("#navigation-drawer"),n=document.querySelector("#main-content");t.addEventListener("click",function(t){t.stopPropagation(),e.classList.toggle("open")}),n.addEventListener("click",function(){e.classList.remove("open")})}},{key:"_highlightActiveLink",value:function(){var t=r();this.querySelectorAll(".app-bar__navigation a").forEach(function(e){var n=e.getAttribute("href").substring(1);e.classList.remove("active"),n===t&&e.classList.add("active")})}}])&&g(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i}(S(HTMLElement));function P(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return T(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,T(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,T(l,"constructor",s),T(s,"constructor",c),c.displayName="GeneratorFunction",T(s,o,"GeneratorFunction"),T(l),T(l,o,"Generator"),T(l,r,function(){return this}),T(l,"toString",function(){return"[object Generator]"}),(P=function(){return{w:i,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){function i(e,n){T(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},T(t,e,n,r)}function E(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}customElements.define("app-bar",_),n(731);const G=function(){var t,e=(t=P().m(function t(){var e;return P().w(function(t){for(;;)switch(t.p=t.n){case 0:if("serviceWorker"in navigator){t.n=1;break}return console.log("Service Worker not supported in the browser"),t.a(2);case 1:return t.p=1,t.n=2,navigator.serviceWorker.register("/ourstory/sw.js",{scope:"/ourstory/"});case 2:console.log("Service worker registered successfully"),t.n=4;break;case 3:t.p=3,e=t.v,console.log("Failed to register service worker",e);case 4:return t.a(2)}},t,null,[[1,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){E(i,r,o,a,u,"next",t)}function u(t){E(i,r,o,a,u,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function F(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return A(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(A(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,A(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,A(l,"constructor",s),A(s,"constructor",c),c.displayName="GeneratorFunction",A(s,o,"GeneratorFunction"),A(l),A(l,o,"Generator"),A(l,r,function(){return this}),A(l,"toString",function(){return"[object Generator]"}),(F=function(){return{w:i,m:p}})()}function A(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}A=function(t,e,n,r){function i(e,n){A(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},A(t,e,n,r)}function B(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){B(i,r,o,a,u,"next",t)}function u(t){B(i,r,o,a,u,"throw",t)}a(void 0)})}}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}const C=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r,this._currentPage=1,this._hasMoreStories=!0},e=[{key:"getStories",value:(r=I(F().m(function t(){return F().w(function(t){for(;;)switch(t.n){case 0:this._view.setupPaginationEvents(this._onPrevPage.bind(this),this._onNextPage.bind(this)),this._renderPage();case 1:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_renderPage",value:(n=I(F().m(function t(){var e,n;return F().w(function(t){for(;;)switch(t.p=t.n){case 0:return this._view.showLoading(),t.p=1,t.n=2,this._model.getAllStories(this._currentPage);case 2:e=t.v,this._hasMoreStories=e.length>=10,this._view.showStories(e),this._view.renderMap(e),this._view.updatePagination(this._currentPage,this._hasMoreStories),t.n=4;break;case 3:t.p=3,n=t.v,console.error(n),this._view.showError("Gagal memuat cerita. Silakan coba lagi nanti.");case 4:return t.p=4,this._view.hideLoading(),t.f(4);case 5:return t.a(2)}},t,this,[[1,3,4,5]])})),function(){return n.apply(this,arguments)})},{key:"_onPrevPage",value:function(){this._currentPage>1&&(this._currentPage-=1,this._renderPage())}},{key:"_onNextPage",value:function(){this._hasMoreStories&&(this._currentPage+=1,this._renderPage())}}],e&&M(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();var N=function(t){return'\n  <div class="story-card">\n    <div class="story-card__image">\n      <img src="'.concat(t.photoUrl,'" alt="Story by ').concat(t.name,'">\n    </div>\n    <div class="story-card__content">\n      <h3><a href="#/story/').concat(t.id,'">').concat(t.name,"</a></h3>\n      <p>").concat(t.description.substring(0,100),'...</p>\n      <small class="story-date">Created: ').concat(new Date(t.createdAt).toLocaleDateString("id-ID"),"</small>\n    </div>\n  </div>\n")},q=document.getElementById("loading-indicator"),R=document.getElementById("notification-container"),U=function(){q.style.display="flex"},H=function(){q.style.display="none"},z=function(t,e){R.innerHTML='\n    <div class="notification-modal">\n      <div class="icon"><i class="fas fa-check-circle"></i></div>\n      <h2>'.concat(t,"</h2>\n      <p>").concat(e,"</p>\n    </div>\n  "),R.style.display="flex",setTimeout(function(){return R.classList.add("show")},10)},K=function(){R.classList.remove("show"),setTimeout(function(){R.style.display="none",R.innerHTML=""},300)};function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function V(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return J(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(J(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,J(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,J(l,"constructor",s),J(s,"constructor",c),c.displayName="GeneratorFunction",J(s,o,"GeneratorFunction"),J(l),J(l,o,"Generator"),J(l,r,function(){return this}),J(l,"toString",function(){return"[object Generator]"}),(V=function(){return{w:i,m:p}})()}function J(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}J=function(t,e,n,r){function i(e,n){J(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},J(t,e,n,r)}function X(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y(r.key),r)}}function Y(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}const $=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <h2>Peta Cerita</h2>\n      <div id="stories-map" class="stories-map"></div>\n      <h2 style="margin-top: 2rem;">Jelajahi Cerita</h2>\n      <div class="stories-list" id="stories-list"></div>\n      <div class="pagination-controls" id="pagination-controls">\n        <button id="prev-page" class="btn btn-secondary" disabled>Sebelumnya</button>\n        <span id="page-indicator">Halaman 1</span>\n        <button id="next-page" class="btn btn-primary">Selanjutnya</button>\n      </div>\n    '}},{key:"afterRender",value:(n=V().m(function t(){return V().w(function(t){for(;;)switch(t.n){case 0:new C({view:this,model:p}).getStories();case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){X(i,r,o,a,u,"next",t)}function u(t){X(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){U()}},{key:"hideLoading",value:function(){H()}},{key:"showStories",value:function(t){var e=document.querySelector("#stories-list");e.innerHTML="",0!==t.length?t.forEach(function(t){e.innerHTML+=N(t)}):e.innerHTML='<p class="empty-message">Belum ada cerita untuk ditampilkan.</p>'}},{key:"renderMap",value:function(t){var e=document.querySelector("#stories-map");e&&e._leaflet_id&&(e._leaflet_id=null);var n=t.filter(function(t){return t.lat&&t.lon});if(n.length>0){var r=L.map("stories-map").setView([n[0].lat,n[0].lon],5),o=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),i=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});o.addTo(r);var a={Street:o,Satellite:i};L.control.layers(a).addTo(r),n.forEach(function(t){L.marker([t.lat,t.lon]).addTo(r).bindPopup('<div class="map-popup">\n              <img src="'.concat(t.photoUrl,'" alt="').concat(t.name,'">\n              <h5>').concat(t.name,"</h5>\n              <p>").concat(t.description.substring(0,50),'...</p>\n              <a href="#/story/').concat(t.id,'">Lihat Detail</a>\n            </div>'))})}else e.innerHTML='<p class="empty-message">Tidak ada cerita dengan data lokasi untuk ditampilkan di peta.</p>'}},{key:"updatePagination",value:function(t,e){document.querySelector("#page-indicator").textContent="Halaman ".concat(t),document.querySelector("#prev-page").disabled=1===t,document.querySelector("#next-page").disabled=!e}},{key:"setupPaginationEvents",value:function(t,e){document.querySelector("#prev-page").addEventListener("click",t),document.querySelector("#next-page").addEventListener("click",e)}},{key:"showError",value:function(t){document.querySelector("#stories-list").innerHTML='<p class="error-message">'.concat(t,"</p>")}}],e&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return et(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(et(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,et(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,et(l,"constructor",s),et(s,"constructor",c),c.displayName="GeneratorFunction",et(s,o,"GeneratorFunction"),et(l),et(l,o,"Generator"),et(l,r,function(){return this}),et(l,"toString",function(){return"[object Generator]"}),(tt=function(){return{w:i,m:p}})()}function et(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}et=function(t,e,n,r){function i(e,n){et(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},et(t,e,n,r)}function nt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function rt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){nt(i,r,o,a,u,"next",t)}function u(t){nt(i,r,o,a,u,"throw",t)}a(void 0)})}}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,it(r.key),r)}}function it(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}const at=function(){return t=function t(e){var n=e.view,r=e.storyApi,o=e.favoriteDb;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._storyApi=r,this._favoriteDb=o,this._story=null},e=[{key:"init",value:(o=rt(tt().m(function t(){var e,n,r;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return this._view.showLoading(),t.p=1,e=i(),t.n=2,this._storyApi.getStoryDetail(e.id);case 2:return n=t.v,this._story=n,this._view.showStory(n),t.n=3,this._initializeFavoriteButton();case 3:t.n=5;break;case 4:t.p=4,r=t.v,console.error(r),this._view.showError("Gagal memuat detail cerita.");case 5:return t.p=5,this._view.hideLoading(),t.f(5);case 6:return t.a(2)}},t,this,[[1,4,5,6]])})),function(){return o.apply(this,arguments)})},{key:"_initializeFavoriteButton",value:(r=rt(tt().m(function t(){var e,n=this;return tt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._isStoryFavorited();case 1:e=t.v,this._view.renderFavoriteButton(e),this._view.setupFavoriteButton(rt(tt().m(function t(){return tt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n._isStoryFavorited();case 1:if(!t.v){t.n=3;break}return t.n=2,n._favoriteDb.deleteStory(n._story.id);case 2:t.n=4;break;case 3:return t.n=4,n._favoriteDb.putStory(n._story);case 4:return t.n=5,n._initializeFavoriteButton();case 5:return t.a(2)}},t)})));case 2:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_isStoryFavorited",value:(n=rt(tt().m(function t(){var e;return tt().w(function(t){for(;;)switch(t.n){case 0:if(this._story){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,this._favoriteDb.getStory(this._story.id);case 2:return e=t.v,t.a(2,!!e)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&ot(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}(),ut=(t,e)=>e.some(e=>t instanceof e);let ct,st;const ft=new WeakMap,lt=new WeakMap,pt=new WeakMap;let yt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ft.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function vt(t){yt=t(yt)}function dt(t){return"function"==typeof t?(e=t,(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ht(this),t),bt(this.request)}:function(...t){return bt(e.apply(ht(this),t))}):(t instanceof IDBTransaction&&function(t){if(ft.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});ft.set(t,e)}(t),ut(t,ct||(ct=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,yt):t);var e}function bt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(bt(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return pt.set(e,t),e}(t);if(lt.has(t))return lt.get(t);const e=dt(t);return e!==t&&(lt.set(t,e),pt.set(e,t)),e}const ht=t=>pt.get(t),mt=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],wt=new Map;function St(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(wt.get(e))return wt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=gt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!mt.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return wt.set(e,i),i}vt(t=>({...t,get:(e,n,r)=>St(e,n)||t.get(e,n,r),has:(e,n)=>!!St(e,n)||t.has(e,n)}));const kt=["continue","continuePrimaryKey","advance"],jt={},Ot=new WeakMap,_t=new WeakMap,Pt={get(t,e){if(!kt.includes(e))return t[e];let n=jt[e];return n||(n=jt[e]=function(...t){Ot.set(this,_t.get(this)[e](...t))}),n}};async function*Tt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,Pt);for(_t.set(n,e),pt.set(n,ht(e));e;)yield n,e=await(Ot.get(n)||e.continue()),Ot.delete(n)}function Et(t,e){return e===Symbol.asyncIterator&&ut(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&ut(t,[IDBIndex,IDBObjectStore])}function Gt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Lt(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Lt(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Lt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Lt(l,"constructor",s),Lt(s,"constructor",c),c.displayName="GeneratorFunction",Lt(s,o,"GeneratorFunction"),Lt(l),Lt(l,o,"Generator"),Lt(l,r,function(){return this}),Lt(l,"toString",function(){return"[object Generator]"}),(Gt=function(){return{w:i,m:p}})()}function Lt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Lt=function(t,e,n,r){function i(e,n){Lt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Lt(t,e,n,r)}function xt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){xt(i,r,o,a,u,"next",t)}function u(t){xt(i,r,o,a,u,"throw",t)}a(void 0)})}}vt(t=>({...t,get:(e,n,r)=>Et(e,n)?Tt:t.get(e,n,r),has:(e,n)=>Et(e,n)||t.has(e,n)}));var At="favorite-stories",Bt=function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),u=bt(a);return r&&a.addEventListener("upgradeneeded",t=>{r(bt(a.result),t.oldVersion,t.newVersion,bt(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),u.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),u}("ourstory-database",1,{upgrade:function(t){t.createObjectStore(At,{keyPath:"id"})}});const It={getStory:function(t){return Ft(Gt().m(function e(){return Gt().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,Bt;case 2:return e.a(2,e.v.get(At,t))}},e)}))()},getAllStories:function(){return Ft(Gt().m(function t(){return Gt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Bt;case 1:return t.a(2,t.v.getAll(At))}},t)}))()},putStory:function(t){return Ft(Gt().m(function e(){return Gt().w(function(e){for(;;)switch(e.n){case 0:if(t.hasOwnProperty("id")){e.n=1;break}return e.a(2);case 1:return e.n=2,Bt;case 2:return e.a(2,e.v.put(At,t))}},e)}))()},deleteStory:function(t){return Ft(Gt().m(function e(){return Gt().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,Bt;case 2:return e.a(2,e.v.delete(At,t))}},e)}))()}};function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Dt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ct(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Ct(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ct(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ct(l,"constructor",s),Ct(s,"constructor",c),c.displayName="GeneratorFunction",Ct(s,o,"GeneratorFunction"),Ct(l),Ct(l,o,"Generator"),Ct(l,r,function(){return this}),Ct(l,"toString",function(){return"[object Generator]"}),(Dt=function(){return{w:i,m:p}})()}function Ct(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ct=function(t,e,n,r){function i(e,n){Ct(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Ct(t,e,n,r)}function Nt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rt(r.key),r)}}function Rt(t){var e=function(t){if("object"!=Mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mt(e)?e:e+""}const Ut=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="story-detail-page">\n        <div id="story-detail-container"></div>\n      </div>\n    '}},{key:"afterRender",value:(n=Dt().m(function t(){return Dt().w(function(t){for(;;)switch(t.n){case 0:new at({view:this,storyApi:p,favoriteDb:It}).init();case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Nt(i,r,o,a,u,"next",t)}function u(t){Nt(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){U()}},{key:"hideLoading",value:function(){H()}},{key:"showStory",value:function(t){if(document.querySelector("#story-detail-container").innerHTML=function(t){return'\n  <div class="story-detail">\n      <img src="'.concat(t.photoUrl,'" alt="Story by ').concat(t.name,'" class="story-detail__image">\n      <div class="story-detail__content">\n          <h2>').concat(t.name,"</h2>\n          <p>").concat(t.description,"</p>\n          <small>Created at: ").concat(new Date(t.createdAt).toLocaleString(),'</small>\n          <div id="favorite-button-container"></div> </div>\n      ').concat(t.lat&&t.lon?'<div id="map-detail" class="map-container"></div>':"","\n  </div>\n")}(t),t.lat&&t.lon){var e=L.map("map-detail").setView([t.lat,t.lon],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),L.marker([t.lat,t.lon]).addTo(e).bindPopup(t.name).openPopup()}}},{key:"showError",value:function(t){document.querySelector("#story-detail-container").innerHTML='<p class="error-message">'.concat(t,"</p>")}},{key:"renderFavoriteButton",value:function(t){var e=document.querySelector("#favorite-button-container");e&&(e.innerHTML=t?'\n  <button aria-label="hapus dari favorit" id="favorite-button" class="favorite">\n    <i class="fas fa-heart" aria-hidden="true"></i>\n  </button>\n':'\n  <button aria-label="tambahkan ke favorit" id="favorite-button" class="favorite">\n     <i class="far fa-heart" aria-hidden="true"></i>\n  </button>\n')}},{key:"setupFavoriteButton",value:function(t){var e=document.querySelector("#favorite-button");e&&e.addEventListener("click",t)}}],e&&qt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function zt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Kt(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Kt(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Kt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Kt(l,"constructor",s),Kt(s,"constructor",c),c.displayName="GeneratorFunction",Kt(s,o,"GeneratorFunction"),Kt(l),Kt(l,o,"Generator"),Kt(l,r,function(){return this}),Kt(l,"toString",function(){return"[object Generator]"}),(zt=function(){return{w:i,m:p}})()}function Kt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Kt=function(t,e,n,r){function i(e,n){Kt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Kt(t,e,n,r)}function Wt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jt(r.key),r)}}function Jt(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}const Xt=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"addStory",value:(n=zt().m(function t(e){var n,r;return zt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e.photo){t.n=1;break}return this._view.showErrorAlert("Mohon unggah atau ambil foto terlebih dahulu!"),t.a(2);case 1:return this._view.showLoading(),t.p=2,t.n=3,this._model.addNewStory({description:e.description,photo:e.photo,lat:e.lat?parseFloat(e.lat):void 0,lon:e.lon?parseFloat(e.lon):void 0});case 3:n=t.v,this._view.hideLoading(),n.error?this._view.showErrorAlert(n.message):(this._view.showSuccessNotification("Berhasil!","Cerita Anda telah dipublikasikan."),this._view.navigateToStories()),t.n=5;break;case 4:t.p=4,r=t.v,this._view.hideLoading(),this._view.showErrorAlert("Gagal menambahkan cerita. Silakan coba lagi."),console.error(r);case 5:return t.a(2)}},t,this,[[2,4]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Wt(i,r,o,a,u,"next",t)}function u(t){Wt(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Yt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return $t(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):($t(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,$t(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,$t(l,"constructor",s),$t(s,"constructor",c),c.displayName="GeneratorFunction",$t(s,o,"GeneratorFunction"),$t(l),$t(l,o,"Generator"),$t(l,r,function(){return this}),$t(l,"toString",function(){return"[object Generator]"}),(Yt=function(){return{w:i,m:p}})()}function $t(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$t=function(t,e,n,r){function i(e,n){$t(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},$t(t,e,n,r)}function Zt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function te(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Zt(i,r,o,a,u,"next",t)}function u(t){Zt(i,r,o,a,u,"throw",t)}a(void 0)})}}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ne(r.key),r)}}function ne(t){var e=function(t){if("object"!=Qt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qt(e)?e:e+""}const re=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._stream=null,this._capturedPhotoBlob=null},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Ceritakan Pengalaman Anda</h2>\n        <form id="add-story-form">\n          <div class="form-group">\n            <label for="description">Deskripsi</label>\n            <textarea id="description" name="description" rows="4" required placeholder="Tuliskan momen spesial Anda..."></textarea>\n          </div>\n          <div class="form-group">\n            <label>Unggah Foto</label>\n            <div class="camera-container" id="camera-container" style="display:none;">\n              <video id="video-preview" autoplay></video>\n              <canvas id="canvas" style="display:none;"></canvas>\n              <button type="button" id="capture-button" class="btn btn-primary" style="margin-top: 10px;"><i class="fas fa-camera"></i> Ambil Foto</button>\n            </div>\n            <button type="button" id="activate-camera-button" class="btn btn-secondary"><i class="fas fa-camera"></i> Aktifkan Kamera</button>\n            <p class="separator" style="margin: 15px 0;">atau</p>\n            <input type="file" id="photo-upload" name="photo" accept="image/*" class="form-input-file">\n            <img id="image-preview" src="#" alt="Image preview" style="display:none; max-width: 100%; margin-top: 10px; border-radius: 8px;"/>\n            <p id="photo-status" style="margin-top: 5px; font-size: 0.9em; color: #555;">Belum ada foto terpilih.</p>\n          </div>\n          <div class="form-group map-container">\n            <label>Pilih Lokasi</label>\n            <div id="map-picker"></div>\n            <input type="hidden" id="latitude" name="latitude">\n            <input type="hidden" id="longitude" name="longitude">\n            <p id="location-info" style="margin-top: 8px;">Klik peta untuk menentukan lokasi Anda.</p>\n          </div>\n          <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Kirim Cerita Anda</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=te(Yt().m(function t(){var e,n=this;return Yt().w(function(t){for(;;)switch(t.n){case 0:e=new Xt({view:this,model:p}),window.addEventListener("hashchange",this.cleanup.bind(this),{once:!0}),this._setupCamera(),this._setupFileUpload(),this._setupMapPicker(),document.getElementById("add-story-form").addEventListener("submit",function(t){t.preventDefault(),e.addStory(n._getFormData())});case 1:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"showLoading",value:function(){U()}},{key:"hideLoading",value:function(){H()}},{key:"showSuccessNotification",value:function(t,e){z(t,e)}},{key:"showErrorAlert",value:function(t){alert(t)}},{key:"navigateToStories",value:function(){setTimeout(function(){K(),window.location.hash="#/stories"},2e3)}},{key:"cleanup",value:function(){this._stream&&this._stream.getTracks().forEach(function(t){return t.stop()})}},{key:"_getFormData",value:function(){var t=document.getElementById("description").value,e=document.getElementById("latitude").value,n=document.getElementById("longitude").value,r=document.getElementById("photo-upload"),o=null;return this._capturedPhotoBlob?o=this._capturedPhotoBlob:r.files&&r.files[0]&&(o=r.files[0]),{description:t,photo:o,lat:e,lon:n}}},{key:"_setupCamera",value:function(){var t=this,e=document.querySelector("#activate-camera-button"),n=document.querySelector("#capture-button"),r=document.querySelector("#video-preview"),o=document.querySelector("#canvas"),i=document.querySelector("#camera-container"),a=document.querySelector("#photo-upload"),u=document.querySelector("#image-preview"),c=document.querySelector("#photo-status");e.addEventListener("click",te(Yt().m(function n(){return Yt().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!t._stream){n.n=1;break}return t._stream.getTracks().forEach(function(t){return t.stop()}),r.srcObject=null,i.style.display="none",e.innerHTML='<i class="fas fa-camera"></i> Aktifkan Kamera',t._capturedPhotoBlob=null,n.a(2);case 1:return n.p=1,t.showLoading(),n.n=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:t._stream=n.v,r.srcObject=t._stream,i.style.display="block",e.innerHTML='<i class="fas fa-stop-circle"></i> Matikan Kamera',a.style.display="none",u.style.display="none",c.textContent="Menggunakan kamera...",n.n=4;break;case 3:n.p=3,n.v,t.showErrorAlert("Tidak bisa mengakses kamera. Mohon izinkan akses kamera.");case 4:return n.p=4,t.hideLoading(),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))),n.addEventListener("click",function(){if(t._stream){var n=o.getContext("2d");o.width=r.videoWidth,o.height=r.videoHeight,n.drawImage(r,0,0,o.width,o.height),u.src=o.toDataURL("image/jpeg"),u.style.display="block",c.textContent="Foto dari kamera berhasil diambil.",o.toBlob(function(e){t._capturedPhotoBlob=e},"image/jpeg"),t._stream.getTracks().forEach(function(t){return t.stop()}),r.srcObject=null,t._stream=null,i.style.display="none",e.innerHTML='<i class="fas fa-camera"></i> Aktifkan Kamera',a.style.display="block"}})}},{key:"_setupFileUpload",value:function(){var t=document.querySelector("#photo-upload"),e=document.querySelector("#image-preview"),n=document.querySelector("#photo-status");t.addEventListener("change",function(){this.files&&this.files[0]&&(e.style.display="block",e.src=URL.createObjectURL(this.files[0]),n.textContent="File terpilih: ".concat(this.files[0].name),this._capturedPhotoBlob=null)}.bind(this))}},{key:"_setupMapPicker",value:function(){var t=L.map("map-picker").setView([-6.2,106.816666],5),e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});e.addTo(t);var r={Street:e,Satellite:n};L.control.layers(r).addTo(t);var o=null,i=document.querySelector("#latitude"),a=document.querySelector("#longitude"),u=document.querySelector("#location-info");t.on("click",function(e){o&&t.removeLayer(o),o=L.marker(e.latlng).addTo(t),i.value=e.latlng.lat,a.value=e.latlng.lng,u.innerHTML="📍 Lokasi terpilih: Lat ".concat(e.latlng.lat.toFixed(6),", Lon ").concat(e.latlng.lng.toFixed(6)),u.style.color="green"})}}],e&&ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ie(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ae(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ae(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ae(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ae(l,"constructor",s),ae(s,"constructor",c),c.displayName="GeneratorFunction",ae(s,o,"GeneratorFunction"),ae(l),ae(l,o,"Generator"),ae(l,r,function(){return this}),ae(l,"toString",function(){return"[object Generator]"}),(ie=function(){return{w:i,m:p}})()}function ae(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ae=function(t,e,n,r){function i(e,n){ae(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},ae(t,e,n,r)}function ue(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function se(t){var e=function(t){if("object"!=oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oe(e)?e:e+""}const fe=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"login",value:(n=ie().m(function t(e){var n,r,o;return ie().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.email,r=e.password,this._view.showLoading(),t.p=1,t.n=2,this._model.login({email:n,password:r});case 2:o=t.v,this._view.hideLoading(),o.error?this._view.showErrorAlert(o.message):(this._view.showSuccessNotification("Berhasil Masuk","Mengalihkan ke halaman utama..."),this._view.navigateToHome()),t.n=4;break;case 3:t.p=3,t.v,this._view.hideLoading(),this._view.showErrorAlert("Login gagal. Silakan coba lagi.");case 4:return t.a(2)}},t,this,[[1,3]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){ue(i,r,o,a,u,"next",t)}function u(t){ue(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function pe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ye(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ye(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ye(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ye(l,"constructor",s),ye(s,"constructor",c),c.displayName="GeneratorFunction",ye(s,o,"GeneratorFunction"),ye(l),ye(l,o,"Generator"),ye(l,r,function(){return this}),ye(l,"toString",function(){return"[object Generator]"}),(pe=function(){return{w:i,m:p}})()}function ye(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ye=function(t,e,n,r){function i(e,n){ye(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},ye(t,e,n,r)}function ve(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function be(t){var e=function(t){if("object"!=le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:e+""}const he=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Login to OurStory</h2>\n        <form id="login-form">\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" name="password" required>\n          </div>\n          <button type="submit" class="btn btn-primary">Login</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=pe().m(function t(){var e;return pe().w(function(t){for(;;)switch(t.n){case 0:e=new fe({view:this,model:p}),document.getElementById("login-form").addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("email").value,r=document.getElementById("password").value;e.login({email:n,password:r})});case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){ve(i,r,o,a,u,"next",t)}function u(t){ve(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){U()}},{key:"hideLoading",value:function(){H()}},{key:"showSuccessNotification",value:function(t,e){z(t,e)}},{key:"navigateToHome",value:function(){setTimeout(function(){K(),window.location.hash="#/",location.reload()},2e3)}},{key:"showErrorAlert",value:function(t){alert(t)}}],e&&de(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ge(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return we(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(we(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,we(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,we(l,"constructor",s),we(s,"constructor",c),c.displayName="GeneratorFunction",we(s,o,"GeneratorFunction"),we(l),we(l,o,"Generator"),we(l,r,function(){return this}),we(l,"toString",function(){return"[object Generator]"}),(ge=function(){return{w:i,m:p}})()}function we(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}we=function(t,e,n,r){function i(e,n){we(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},we(t,e,n,r)}function Se(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,je(r.key),r)}}function je(t){var e=function(t){if("object"!=me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==me(e)?e:e+""}const Oe=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"register",value:(n=ge().m(function t(e){var n,r,o,i;return ge().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.name,r=e.email,o=e.password,t.p=1,t.n=2,this._model.register({name:n,email:r,password:o});case 2:(i=t.v).error?this._view.showErrorAlert(i.message):(this._view.showSuccessAlert("Registrasi berhasil! Silakan login."),this._view.navigateToLogin()),t.n=4;break;case 3:t.p=3,t.v,this._view.showErrorAlert("Registrasi gagal. Silakan coba lagi.");case 4:return t.a(2)}},t,this,[[1,3]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Se(i,r,o,a,u,"next",t)}function u(t){Se(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Pe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Te(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Te(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Te(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Te(l,"constructor",s),Te(s,"constructor",c),c.displayName="GeneratorFunction",Te(s,o,"GeneratorFunction"),Te(l),Te(l,o,"Generator"),Te(l,r,function(){return this}),Te(l,"toString",function(){return"[object Generator]"}),(Pe=function(){return{w:i,m:p}})()}function Te(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Te=function(t,e,n,r){function i(e,n){Te(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Te(t,e,n,r)}function Ee(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Le(r.key),r)}}function Le(t){var e=function(t){if("object"!=_e(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_e(e)?e:e+""}const xe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Register for OurStory</h2>\n        <form id="register-form">\n          <div class="form-group">\n            <label for="name">Name</label>\n            <input type="text" id="name" name="name" required>\n          </div>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" name="password" minlength="8" required>\n          </div>\n          <button type="submit" class="btn btn-primary">Register</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=Pe().m(function t(){var e;return Pe().w(function(t){for(;;)switch(t.n){case 0:e=new Oe({view:this,model:p}),document.getElementById("register-form").addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("name").value,r=document.getElementById("email").value,o=document.getElementById("password").value;e.register({name:n,email:r,password:o})});case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Ee(i,r,o,a,u,"next",t)}function u(t){Ee(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showSuccessAlert",value:function(t){alert(t)}},{key:"showErrorAlert",value:function(t){alert(t)}},{key:"navigateToLogin",value:function(){window.location.hash="#/login"}}],e&&Ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ae(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Be(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Be(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Be(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Be(l,"constructor",s),Be(s,"constructor",c),c.displayName="GeneratorFunction",Be(s,o,"GeneratorFunction"),Be(l),Be(l,o,"Generator"),Be(l,r,function(){return this}),Be(l,"toString",function(){return"[object Generator]"}),(Ae=function(){return{w:i,m:p}})()}function Be(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Be=function(t,e,n,r){function i(e,n){Be(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Be(t,e,n,r)}function Ie(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Me(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ie(i,r,o,a,u,"next",t)}function u(t){Ie(i,r,o,a,u,"throw",t)}a(void 0)})}}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ce(r.key),r)}}function Ce(t){var e=function(t){if("object"!=Fe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fe(e)?e:e+""}function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function qe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Re(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Re(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Re(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Re(l,"constructor",s),Re(s,"constructor",c),c.displayName="GeneratorFunction",Re(s,o,"GeneratorFunction"),Re(l),Re(l,o,"Generator"),Re(l,r,function(){return this}),Re(l,"toString",function(){return"[object Generator]"}),(qe=function(){return{w:i,m:p}})()}function Re(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Re=function(t,e,n,r){function i(e,n){Re(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Re(t,e,n,r)}function Ue(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function He(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ue(i,r,o,a,u,"next",t)}function u(t){Ue(i,r,o,a,u,"throw",t)}a(void 0)})}}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ke(r.key),r)}}function Ke(t){var e=function(t){if("object"!=Ne(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ne(e)?e:e+""}function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function Ve(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Je(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Je(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Je(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Je(l,"constructor",s),Je(s,"constructor",c),c.displayName="GeneratorFunction",Je(s,o,"GeneratorFunction"),Je(l),Je(l,o,"Generator"),Je(l,r,function(){return this}),Je(l,"toString",function(){return"[object Generator]"}),(Ve=function(){return{w:i,m:p}})()}function Je(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Je=function(t,e,n,r){function i(e,n){Je(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Je(t,e,n,r)}function Xe(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ye(r.key),r)}}function Ye(t){var e=function(t){if("object"!=We(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==We(e)?e:e+""}const $e={"/":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=Me(Ae().m(function t(){return Ae().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="home-container">\n        <h1>Masuki Dunia Penuh Cerita Kami</h1>\n        <p>Jelajahi berbagai pengalaman atau bagikan ceritamu sendiri.</p>\n        <div class="home-buttons">\n          <a href="#/stories" class="btn btn-primary"><i class="fas fa-book-open"></i> Jelajahi Cerita</a>\n          <a href="#/add-story" class="btn btn-secondary"><i class="fas fa-plus-circle"></i> Buat Cerita Baru</a>\n        </div>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=Me(Ae().m(function t(){return Ae().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)})),function(){return n.apply(this,arguments)})}],e&&De(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),"/stories":$,"/story/:id":Ut,"/add-story":re,"/about":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=He(qe().m(function t(){return qe().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="about-container">\n        <div class="about-header">\n          <h2>Tentang OurStory</h2>\n          <p>Bagikan dan jelajahi cerita dari seluruh penjuru dunia.</p>\n        </div>\n        <div class="about-features">\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-camera-retro"></i></div>\n            <h3>Bagikan Momen Anda</h3>\n            <p>Unggah cerita Anda dengan mudah, baik melalui unggahan file langsung maupun menggunakan kamera perangkat Anda.</p>\n          </div>\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-map-marked-alt"></i></div>\n            <h3>Tandai Lokasi</h3>\n            <p>Sematkan lokasi pada setiap cerita Anda dengan memilih titik di peta interaktif kami untuk memberikan konteks geografis.</p>\n          </div>\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-globe-asia"></i></div>\n            <h3>Jelajahi Dunia</h3>\n            <p>Lihat semua cerita dari pengguna lain yang tersebar di seluruh dunia melalui tampilan peta yang komprehensif.</p>\n          </div>\n        </div>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=He(qe().m(function t(){return qe().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)})),function(){return n.apply(this,arguments)})}],e&&ze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),"/login":he,"/register":xe,"/favorites":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="content">\n        <h2 class="content__heading">Cerita Favorit Anda</h2>\n        <div id="stories-list" class="stories-list"></div>\n      </div>\n    '}},{key:"afterRender",value:(n=Ve().m(function t(){var e,n;return Ve().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,It.getAllStories();case 1:e=t.v,n=document.querySelector("#stories-list"),0===e.length?n.innerHTML='\n        <p class="empty-message">Anda belum memiliki cerita favorit.</p>\n      ':e.forEach(function(t){n.innerHTML+=N(t)});case 2:return t.a(2)}},t)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Xe(i,r,o,a,u,"next",t)}function u(t){Xe(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})}],e&&Qe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}()};function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function tn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return en(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(en(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,en(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,en(l,"constructor",s),en(s,"constructor",c),c.displayName="GeneratorFunction",en(s,o,"GeneratorFunction"),en(l),en(l,o,"Generator"),en(l,r,function(){return this}),en(l,"toString",function(){return"[object Generator]"}),(tn=function(){return{w:i,m:p}})()}function en(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}en=function(t,e,n,r){function i(e,n){en(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},en(t,e,n,r)}function nn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,on(r.key),r)}}function on(t){var e=function(t){if("object"!=Ze(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ze(e)?e:e+""}const an=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="not-found-container" style="text-align: center; padding: 4rem 1rem;">\n        <h2>404 - Halaman Tidak Ditemukan</h2>\n        <p>Maaf, halaman yang Anda cari tidak ada. Kembali ke <a href="#/">halaman utama</a>.</p>\n      </div>\n    '}},{key:"afterRender",value:(n=tn().m(function t(){return tn().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){nn(i,r,o,a,u,"next",t)}function u(t){nn(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})}],e&&rn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function cn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return sn(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(sn(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,sn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,sn(l,"constructor",s),sn(s,"constructor",c),c.displayName="GeneratorFunction",sn(s,o,"GeneratorFunction"),sn(l),sn(l,o,"Generator"),sn(l,r,function(){return this}),sn(l,"toString",function(){return"[object Generator]"}),(cn=function(){return{w:i,m:p}})()}function sn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}sn=function(t,e,n,r){function i(e,n){sn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},sn(t,e,n,r)}function fn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ln(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){fn(i,r,o,a,u,"next",t)}function u(t){fn(i,r,o,a,u,"throw",t)}a(void 0)})}}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yn(r.key),r)}}function yn(t){var e=function(t){if("object"!=un(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==un(e)?e:e+""}var vn=new(function(){return e=function t(e){var n=e.content;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._content=n},n=[{key:"renderPage",value:(r=ln(cn().m(function e(){var n,r,i,a=this;return cn().w(function(e){for(;;)switch(e.n){case 0:if(n=o(),t.isUserLoggedIn()||["/login","/register"].includes(n)){e.n=1;break}return window.location.hash="#/login",e.a(2);case 1:if(r=new($e[n]||an),i=function(){var t=ln(cn().m(function t(){return cn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.render();case 1:return a._content.innerHTML=t.v,t.n=2,r.afterRender();case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),!document.startViewTransition){e.n=2;break}document.startViewTransition(i),e.n=3;break;case 2:return e.n=3,i();case 3:return e.a(2)}},e)})),function(){return r.apply(this,arguments)})}],n&&pn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}())({content:document.querySelector("#main-content")});window.addEventListener("hashchange",function(){vn.renderPage()}),window.addEventListener("load",function(){vn.renderPage(),G(),h.init()})})()})();