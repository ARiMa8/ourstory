/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{var t={731:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return n&&i(a,n.prototype),a}(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var u=function(n){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,n,r){return n=a(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(n,r||[],a(e).constructor):n.apply(e,r))}(this,r,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,n),u=r,(c=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){this.innerHTML="\n      <footer>\n        <p>ARiMa OurStory App &copy; 2025</p>\n      </footer>\n    "}}])&&e(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,c}(r(HTMLElement));customElements.define("footer-bar",u)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{"use strict";const t={setUser:function(t){var e=t.userId,n=t.name,r=t.token;sessionStorage.setItem("userId",e),sessionStorage.setItem("userName",n),sessionStorage.setItem("userToken",r)},getUser:function(){return{userId:sessionStorage.getItem("userId"),userName:sessionStorage.getItem("userName"),token:sessionStorage.getItem("userToken")}},getToken:function(){return sessionStorage.getItem("userToken")},isUserLoggedIn:function(){return!!this.getToken()},logout:function(){sessionStorage.clear(),window.location.hash="#/login",location.reload()}};function e(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null}}function r(){return location.hash.replace("#","")||"/"}function o(){return t=e(r()),n="",t.resource&&(n=n.concat("/".concat(t.resource))),t.id&&(n=n.concat("/:id")),n||"/";var t,n}function i(){return e(r())}const a="https://story-api.dicoding.dev/v1",u="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return s(f,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),f}var a={};function u(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),y=l.prototype=u.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=l,s(y,"constructor",l),s(l,"constructor",f),f.displayName="GeneratorFunction",s(l,o,"GeneratorFunction"),s(y),s(y,o,"Generator"),s(y,r,function(){return this}),s(y,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m:v}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function i(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},s(t,e,n,r)}function f(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){f(i,r,o,a,u,"next",t)}function u(t){f(i,r,o,a,u,"throw",t)}a(void 0)})}}const p={register:function(t){return l(c().m(function e(){var n,r,o,i;return c().w(function(e){for(;;)switch(e.n){case 0:return n=t.name,r=t.email,o=t.password,e.n=1,fetch(a+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:r,password:o})});case 1:return i=e.v,e.a(2,i.json())}},e)}))()},login:function(e){return l(c().m(function n(){var r,o,i,u;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.email,o=e.password,n.n=1,fetch(a+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});case 1:return i=n.v,n.n=2,i.json();case 2:return(u=n.v).error||t.setUser(u.loginResult),n.a(2,u)}},n)}))()},getAllStories:function(){var e=arguments;return l(c().m(function n(){var r,o,i,u;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:10,n.n=1,fetch("".concat(a,"/stories?page=").concat(r,"&size=").concat(o),{headers:{Authorization:"Bearer ".concat(t.getToken())}});case 1:return i=n.v,n.n=2,i.json();case 2:return u=n.v,n.a(2,u.listStory)}},n)}))()},getStoryDetail:function(e){return l(c().m(function n(){var r,o;return c().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,fetch("".concat(a,"/stories/").concat(e),{headers:{Authorization:"Bearer ".concat(t.getToken())}});case 1:return r=n.v,n.n=2,r.json();case 2:return o=n.v,n.a(2,o.story)}},n)}))()},addNewStory:function(e){return l(c().m(function n(){var r,o,i,u,s,f;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.description,o=e.photo,i=e.lat,u=e.lon,(s=new FormData).append("description",r),s.append("photo",o),i&&s.append("lat",i),u&&s.append("lon",u),n.n=1,fetch(a+"/stories",{method:"POST",headers:{Authorization:"Bearer ".concat(t.getToken())},body:s});case 1:return f=n.v,n.a(2,f.json())}},n)}))()},subscribeNotification:function(e){return l(c().m(function n(){var r,o;return c().w(function(n){for(;;)switch(n.n){case 0:return r=e.toJSON(),n.n=1,fetch(a+"/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.getToken())},body:JSON.stringify({endpoint:r.endpoint,keys:{p256dh:r.keys.p256dh,auth:r.keys.auth}})});case 1:return o=n.v,n.a(2,o.json())}},n)}))()}};function y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return v(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(v(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,v(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,v(l,"constructor",s),v(s,"constructor",c),c.displayName="GeneratorFunction",v(s,o,"GeneratorFunction"),v(l),v(l,o,"Generator"),v(l,r,function(){return this}),v(l,"toString",function(){return"[object Generator]"}),(y=function(){return{w:i,m:p}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){function i(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},v(t,e,n,r)}function d(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){d(i,r,o,a,u,"next",t)}function u(t){d(i,r,o,a,u,"throw",t)}a(void 0)})}}const h={init:function(){return b(y().m(function t(){return y().w(function(t){for(;;)switch(t.n){case 0:if("Notification"in window){t.n=1;break}return console.log("Browser does not support notifications."),t.a(2);case 1:if("serviceWorker"in navigator){t.n=2;break}return console.log("Browser does not support service workers."),t.a(2);case 2:if("PushManager"in window){t.n=3;break}return console.log("Browser does not support Push API."),t.a(2);case 3:return t.a(2)}},t)}))()},requestNotificationPermission:function(){return b(y().m(function t(){return y().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Notification.requestPermission();case 1:if("granted"===t.v){t.n=2;break}throw console.log("Notification permission not granted."),new Error("Notification permission not granted.");case 2:return t.a(2)}},t)}))()},subscribe:function(){var t=this;return b(y().m(function e(){var n,r,o;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.requestNotificationPermission();case 1:return e.n=2,navigator.serviceWorker.ready;case 2:return n=e.v,e.n=3,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlBase64ToUint8Array(u)});case 3:return r=e.v,e.n=4,p.subscribeNotification(r);case 4:console.log("Successfully subscribed to notifications."),alert("Anda berhasil subscribe notifikasi!"),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Failed to subscribe to notifications:",o),alert("Gagal melakukan subscribe. Pastikan Anda mengizinkan notifikasi.");case 6:return e.a(2)}},e,null,[[0,5]])}))()},_urlBase64ToUint8Array:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}function S(t){var e="function"==typeof Map?new Map:void 0;return S=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(k())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&O(o,n.prototype),o}(t,arguments,j(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,t)},S(t)}function k(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(k=function(){return!!t})()}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var _=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e,n){return e=j(e),function(t,e){if(e&&("object"==m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k()?Reflect.construct(e,n||[],j(t).constructor):e.apply(t,n))}(this,n,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(n,e),o=n,(i=[{key:"connectedCallback",value:function(){var t=this;this.render(),this._setupEventListeners(),this._highlightActiveLink(),window.addEventListener("hashchange",function(){return t._highlightActiveLink()})}},{key:"render",value:function(){var e=t.isUserLoggedIn();this.innerHTML='\n      <div class="app-bar">\n        <div class="app-bar__brand"> <a href="#/"><h1>OurStory</h1></a> </div>\n        <button class="app-bar__menu-button" id="menu-button" aria-label="Open Navigation Menu">☰</button>\n        <nav class="app-bar__navigation" id="navigation-drawer">\n          <ul>\n            <li><a href="#/stories">Story</a></li>\n            <li><a href="#/favorites">Favorit</a></li>\n            <li><a href="#/about">About</a></li>\n            '.concat(e?'\n              <li><a href="#/add-story">Add Story</a></li>\n              <li><button id="subscribe-button" class="btn-subscribe" title="Subscribe to Notifications"><i class="fas fa-bell"></i></button></li>\n              <li><button id="logout-button" class="btn-logout"><i class="fas fa-sign-out-alt"></i> Keluar</button></li>\n            ':'\n              <li><a href="#/login">Login</a></li>\n              <li><a href="#/register">Register</a></li>\n            ',"\n          </ul>\n        </nav>\n      </div>\n    "),e&&(this.querySelector("#logout-button").addEventListener("click",t.logout),this.querySelector("#subscribe-button").addEventListener("click",function(){h.subscribe()}))}},{key:"_setupEventListeners",value:function(){var t=this.querySelector("#menu-button"),e=this.querySelector("#navigation-drawer"),n=document.querySelector("#main-content");t.addEventListener("click",function(t){t.stopPropagation(),e.classList.toggle("open")}),n.addEventListener("click",function(){e.classList.remove("open")})}},{key:"_highlightActiveLink",value:function(){var t=r();this.querySelectorAll(".app-bar__navigation a").forEach(function(e){var n=e.getAttribute("href").substring(1);e.classList.remove("active"),n===t&&e.classList.add("active")})}}])&&g(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i}(S(HTMLElement));function P(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return T(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,T(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,T(l,"constructor",s),T(s,"constructor",c),c.displayName="GeneratorFunction",T(s,o,"GeneratorFunction"),T(l),T(l,o,"Generator"),T(l,r,function(){return this}),T(l,"toString",function(){return"[object Generator]"}),(P=function(){return{w:i,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){function i(e,n){T(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},T(t,e,n,r)}function E(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}customElements.define("app-bar",_),n(731);const G=function(){var t,e=(t=P().m(function t(){var e;return P().w(function(t){for(;;)switch(t.p=t.n){case 0:if("serviceWorker"in navigator){t.n=1;break}return console.log("Service Worker not supported in the browser"),t.a(2);case 1:return t.p=1,t.n=2,navigator.serviceWorker.register("/ourstory/sw.js",{scope:"/ourstory/"});case 2:console.log("Service worker registered successfully"),t.n=4;break;case 3:t.p=3,e=t.v,console.log("Failed to register service worker",e);case 4:return t.a(2)}},t,null,[[1,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){E(i,r,o,a,u,"next",t)}function u(t){E(i,r,o,a,u,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}const A=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"init",value:function(){window.addEventListener("online",this._handleOnline.bind(this)),window.addEventListener("offline",this._handleOffline.bind(this)),navigator.onLine||this._handleOffline()}},{key:"_handleOnline",value:function(){console.log("App is online"),this._showConnectionStatus("Online","success"),this._removeOfflineBanner()}},{key:"_handleOffline",value:function(){console.log("App is offline"),this._showConnectionStatus("Offline","warning"),this._showOfflineBanner()}},{key:"_showConnectionStatus",value:function(t,e){var n=document.getElementById("connection-status");n||((n=document.createElement("div")).id="connection-status",n.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 50%;\n        transform: translateX(-50%);\n        padding: 8px 16px;\n        border-radius: 0 0 8px 8px;\n        font-size: 12px;\n        font-weight: bold;\n        z-index: 10000;\n        transition: all 0.3s ease;\n      ",document.body.appendChild(n)),n.textContent=t,"success"===e?(n.style.backgroundColor="#28a745",n.style.color="white",setTimeout(function(){n&&(n.style.opacity="0",setTimeout(function(){return n.remove()},300))},3e3)):(n.style.backgroundColor="#ffc107",n.style.color="#212529",n.style.opacity="1")}},{key:"_showOfflineBanner",value:function(){this._removeOfflineBanner();var t=document.createElement("div");t.id="offline-banner",t.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      left: 20px;\n      right: 20px;\n      background-color: #f8d7da;\n      border: 1px solid #f5c6cb;\n      color: #721c24;\n      padding: 15px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n      z-index: 9999;\n      text-align: center;\n      animation: slideUp 0.3s ease;\n    ",t.innerHTML='\n      <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">\n        <i class="fas fa-wifi" style="opacity: 0.5;"></i>\n        <span>Anda sedang offline. Beberapa fitur mungkin terbatas.</span>\n        <button onclick="this.parentElement.parentElement.remove()" \n                style="background: none; border: none; font-size: 18px; cursor: pointer; color: #721c24;">×</button>\n      </div>\n    ';var e=document.createElement("style");e.textContent="\n      @keyframes slideUp {\n        from { transform: translateY(100%); opacity: 0; }\n        to { transform: translateY(0); opacity: 1; }\n      }\n    ",document.head.appendChild(e),document.body.appendChild(t)}},{key:"_removeOfflineBanner",value:function(){var t=document.getElementById("offline-banner");t&&t.remove()}},{key:"isOnline",value:function(){return navigator.onLine}},{key:"showOfflineMessage",value:function(){alert("Tidak dapat ".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"melakukan aksi ini"," saat offline. Silakan periksa koneksi internet Anda."))}}],null&&F(t.prototype,null),e&&F(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function C(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return M(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(M(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,M(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,M(l,"constructor",s),M(s,"constructor",c),c.displayName="GeneratorFunction",M(s,o,"GeneratorFunction"),M(l),M(l,o,"Generator"),M(l,r,function(){return this}),M(l,"toString",function(){return"[object Generator]"}),(C=function(){return{w:i,m:p}})()}function M(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}M=function(t,e,n,r){function i(e,n){M(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},M(t,e,n,r)}function D(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function N(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){D(i,r,o,a,u,"next",t)}function u(t){D(i,r,o,a,u,"throw",t)}a(void 0)})}}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t){if("object"!=I(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I(e)?e:e+""}const R=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r,this._currentPage=1,this._hasMoreStories=!0},e=[{key:"getStories",value:(r=N(C().m(function t(){return C().w(function(t){for(;;)switch(t.n){case 0:this._view.setupPaginationEvents(this._onPrevPage.bind(this),this._onNextPage.bind(this)),this._renderPage();case 1:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_renderPage",value:(n=N(C().m(function t(){var e,n;return C().w(function(t){for(;;)switch(t.p=t.n){case 0:return this._view.showLoading(),t.p=1,t.n=2,this._model.getAllStories(this._currentPage);case 2:e=t.v,this._hasMoreStories=e.length>=10,this._view.showStories(e),this._view.renderMap(e),this._view.updatePagination(this._currentPage,this._hasMoreStories),t.n=4;break;case 3:t.p=3,n=t.v,console.error(n),this._view.showError("Gagal memuat cerita. Silakan coba lagi nanti.");case 4:return t.p=4,this._view.hideLoading(),t.f(4);case 5:return t.a(2)}},t,this,[[1,3,4,5]])})),function(){return n.apply(this,arguments)})},{key:"_onPrevPage",value:function(){this._currentPage>1&&(this._currentPage-=1,this._renderPage())}},{key:"_onNextPage",value:function(){this._hasMoreStories&&(this._currentPage+=1,this._renderPage())}}],e&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();var H=function(t){return'\n  <div class="story-card">\n    <div class="story-card__image">\n      <img src="'.concat(t.photoUrl,'" alt="Story by ').concat(t.name,'">\n    </div>\n    <div class="story-card__content">\n      <h3><a href="#/story/').concat(t.id,'">').concat(t.name,"</a></h3>\n      <p>").concat(t.description.substring(0,100),'...</p>\n      <small class="story-date">Created: ').concat(new Date(t.createdAt).toLocaleDateString("id-ID"),"</small>\n    </div>\n  </div>\n")},z=document.getElementById("loading-indicator"),K=document.getElementById("notification-container"),W=function(){z.style.display="flex"},V=function(){z.style.display="none"},J=function(t,e){K.innerHTML='\n    <div class="notification-modal">\n      <div class="icon"><i class="fas fa-check-circle"></i></div>\n      <h2>'.concat(t,"</h2>\n      <p>").concat(e,"</p>\n    </div>\n  "),K.style.display="flex",setTimeout(function(){return K.classList.add("show")},10)},X=function(){K.classList.remove("show"),setTimeout(function(){K.style.display="none",K.innerHTML=""},300)};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function Q(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return $(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):($(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,$(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,$(l,"constructor",s),$(s,"constructor",c),c.displayName="GeneratorFunction",$(s,o,"GeneratorFunction"),$(l),$(l,o,"Generator"),$(l,r,function(){return this}),$(l,"toString",function(){return"[object Generator]"}),(Q=function(){return{w:i,m:p}})()}function $(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$=function(t,e,n,r){function i(e,n){$(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},$(t,e,n,r)}function Z(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function et(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}const nt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <h2>Peta Cerita</h2>\n      <div id="stories-map" class="stories-map"></div>\n      <h2 style="margin-top: 2rem;">Jelajahi Cerita</h2>\n      <div class="stories-list" id="stories-list"></div>\n      <div class="pagination-controls" id="pagination-controls">\n        <button id="prev-page" class="btn btn-secondary" disabled>Sebelumnya</button>\n        <span id="page-indicator">Halaman 1</span>\n        <button id="next-page" class="btn btn-primary">Selanjutnya</button>\n      </div>\n    '}},{key:"afterRender",value:(n=Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:new R({view:this,model:p}).getStories();case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Z(i,r,o,a,u,"next",t)}function u(t){Z(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){W()}},{key:"hideLoading",value:function(){V()}},{key:"showStories",value:function(t){var e=document.querySelector("#stories-list");e.innerHTML="",0!==t.length?t.forEach(function(t){e.innerHTML+=H(t)}):e.innerHTML='<p class="empty-message">Belum ada cerita untuk ditampilkan.</p>'}},{key:"renderMap",value:function(t){var e=document.querySelector("#stories-map");e&&e._leaflet_id&&(e._leaflet_id=null);var n=t.filter(function(t){return t.lat&&t.lon});if(n.length>0){var r=L.map("stories-map").setView([n[0].lat,n[0].lon],5),o=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),i=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});o.addTo(r);var a={Street:o,Satellite:i};L.control.layers(a).addTo(r),n.forEach(function(t){L.marker([t.lat,t.lon]).addTo(r).bindPopup('<div class="map-popup">\n              <img src="'.concat(t.photoUrl,'" alt="').concat(t.name,'">\n              <h5>').concat(t.name,"</h5>\n              <p>").concat(t.description.substring(0,50),'...</p>\n              <a href="#/story/').concat(t.id,'">Lihat Detail</a>\n            </div>'))})}else e.innerHTML='<p class="empty-message">Tidak ada cerita dengan data lokasi untuk ditampilkan di peta.</p>'}},{key:"updatePagination",value:function(t,e){document.querySelector("#page-indicator").textContent="Halaman ".concat(t),document.querySelector("#prev-page").disabled=1===t,document.querySelector("#next-page").disabled=!e}},{key:"setupPaginationEvents",value:function(t,e){document.querySelector("#prev-page").addEventListener("click",t),document.querySelector("#next-page").addEventListener("click",e)}},{key:"showError",value:function(t){document.querySelector("#stories-list").innerHTML='<p class="error-message">'.concat(t,"</p>")}}],e&&tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return it(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(it(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,it(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,it(l,"constructor",s),it(s,"constructor",c),c.displayName="GeneratorFunction",it(s,o,"GeneratorFunction"),it(l),it(l,o,"Generator"),it(l,r,function(){return this}),it(l,"toString",function(){return"[object Generator]"}),(ot=function(){return{w:i,m:p}})()}function it(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}it=function(t,e,n,r){function i(e,n){it(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},it(t,e,n,r)}function at(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ut(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){at(i,r,o,a,u,"next",t)}function u(t){at(i,r,o,a,u,"throw",t)}a(void 0)})}}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function st(t){var e=function(t){if("object"!=rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rt(e)?e:e+""}const ft=function(){return t=function t(e){var n=e.view,r=e.storyApi,o=e.favoriteDb;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._storyApi=r,this._favoriteDb=o,this._story=null},e=[{key:"init",value:(o=ut(ot().m(function t(){var e,n,r;return ot().w(function(t){for(;;)switch(t.p=t.n){case 0:return this._view.showLoading(),t.p=1,e=i(),t.n=2,this._storyApi.getStoryDetail(e.id);case 2:return n=t.v,this._story=n,this._view.showStory(n),t.n=3,this._initializeFavoriteButton();case 3:t.n=5;break;case 4:t.p=4,r=t.v,console.error(r),this._view.showError("Gagal memuat detail cerita.");case 5:return t.p=5,this._view.hideLoading(),t.f(5);case 6:return t.a(2)}},t,this,[[1,4,5,6]])})),function(){return o.apply(this,arguments)})},{key:"_initializeFavoriteButton",value:(r=ut(ot().m(function t(){var e,n=this;return ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this._isStoryFavorited();case 1:e=t.v,this._view.renderFavoriteButton(e),this._view.setupFavoriteButton(ut(ot().m(function t(){return ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n._isStoryFavorited();case 1:if(!t.v){t.n=3;break}return t.n=2,n._favoriteDb.deleteStory(n._story.id);case 2:t.n=4;break;case 3:return t.n=4,n._favoriteDb.putStory(n._story);case 4:return t.n=5,n._initializeFavoriteButton();case 5:return t.a(2)}},t)})));case 2:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"_isStoryFavorited",value:(n=ut(ot().m(function t(){var e;return ot().w(function(t){for(;;)switch(t.n){case 0:if(this._story){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,this._favoriteDb.getStory(this._story.id);case 2:return e=t.v,t.a(2,!!e)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&ct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}(),lt=(t,e)=>e.some(e=>t instanceof e);let pt,yt;const vt=new WeakMap,dt=new WeakMap,bt=new WeakMap;let ht={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return vt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function mt(t){ht=t(ht)}function gt(t){return"function"==typeof t?(e=t,(yt||(yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(St(this),t),wt(this.request)}:function(...t){return wt(e.apply(St(this),t))}):(t instanceof IDBTransaction&&function(t){if(vt.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});vt.set(t,e)}(t),lt(t,pt||(pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,ht):t);var e}function wt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(wt(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return bt.set(e,t),e}(t);if(dt.has(t))return dt.get(t);const e=gt(t);return e!==t&&(dt.set(t,e),bt.set(e,t)),e}const St=t=>bt.get(t),kt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],jt=new Map;function _t(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(jt.get(e))return jt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Ot.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!kt.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return jt.set(e,i),i}mt(t=>({...t,get:(e,n,r)=>_t(e,n)||t.get(e,n,r),has:(e,n)=>!!_t(e,n)||t.has(e,n)}));const Pt=["continue","continuePrimaryKey","advance"],Tt={},Et=new WeakMap,Gt=new WeakMap,xt={get(t,e){if(!Pt.includes(e))return t[e];let n=Tt[e];return n||(n=Tt[e]=function(...t){Et.set(this,Gt.get(this)[e](...t))}),n}};async function*Lt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,xt);for(Gt.set(n,e),bt.set(n,St(e));e;)yield n,e=await(Et.get(n)||e.continue()),Et.delete(n)}function Ft(t,e){return e===Symbol.asyncIterator&&lt(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&lt(t,[IDBIndex,IDBObjectStore])}function Bt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return At(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(At(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,At(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,At(l,"constructor",s),At(s,"constructor",c),c.displayName="GeneratorFunction",At(s,o,"GeneratorFunction"),At(l),At(l,o,"Generator"),At(l,r,function(){return this}),At(l,"toString",function(){return"[object Generator]"}),(Bt=function(){return{w:i,m:p}})()}function At(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}At=function(t,e,n,r){function i(e,n){At(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},At(t,e,n,r)}function It(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ct(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){It(i,r,o,a,u,"next",t)}function u(t){It(i,r,o,a,u,"throw",t)}a(void 0)})}}mt(t=>({...t,get:(e,n,r)=>Ft(e,n)?Lt:t.get(e,n,r),has:(e,n)=>Ft(e,n)||t.has(e,n)}));var Mt="favorite-stories",Dt=function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),u=wt(a);return r&&a.addEventListener("upgradeneeded",t=>{r(wt(a.result),t.oldVersion,t.newVersion,wt(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),u.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),u}("ourstory-database",1,{upgrade:function(t){t.createObjectStore(Mt,{keyPath:"id"})}});const Nt={getStory:function(t){return Ct(Bt().m(function e(){return Bt().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,Dt;case 2:return e.a(2,e.v.get(Mt,t))}},e)}))()},getAllStories:function(){return Ct(Bt().m(function t(){return Bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Dt;case 1:return t.a(2,t.v.getAll(Mt))}},t)}))()},putStory:function(t){return Ct(Bt().m(function e(){return Bt().w(function(e){for(;;)switch(e.n){case 0:if(t.hasOwnProperty("id")){e.n=1;break}return e.a(2);case 1:return e.n=2,Dt;case 2:return e.a(2,e.v.put(Mt,t))}},e)}))()},deleteStory:function(t){return Ct(Bt().m(function e(){return Bt().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,Dt;case 2:return e.a(2,e.v.delete(Mt,t))}},e)}))()}};function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Ut(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Rt(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Rt(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Rt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Rt(l,"constructor",s),Rt(s,"constructor",c),c.displayName="GeneratorFunction",Rt(s,o,"GeneratorFunction"),Rt(l),Rt(l,o,"Generator"),Rt(l,r,function(){return this}),Rt(l,"toString",function(){return"[object Generator]"}),(Ut=function(){return{w:i,m:p}})()}function Rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rt=function(t,e,n,r){function i(e,n){Rt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Rt(t,e,n,r)}function Ht(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kt(r.key),r)}}function Kt(t){var e=function(t){if("object"!=qt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qt(e)?e:e+""}const Wt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="story-detail-page">\n        <div id="story-detail-container"></div>\n      </div>\n    '}},{key:"afterRender",value:(n=Ut().m(function t(){return Ut().w(function(t){for(;;)switch(t.n){case 0:new ft({view:this,storyApi:p,favoriteDb:Nt}).init();case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Ht(i,r,o,a,u,"next",t)}function u(t){Ht(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){W()}},{key:"hideLoading",value:function(){V()}},{key:"showStory",value:function(t){if(document.querySelector("#story-detail-container").innerHTML=function(t){return'\n  <div class="story-detail">\n      <img src="'.concat(t.photoUrl,'" alt="Story by ').concat(t.name,'" class="story-detail__image">\n      <div class="story-detail__content">\n          <h2>').concat(t.name,"</h2>\n          <p>").concat(t.description,"</p>\n          <small>Created at: ").concat(new Date(t.createdAt).toLocaleString(),'</small>\n          <div id="favorite-button-container"></div> </div>\n      ').concat(t.lat&&t.lon?'<div id="map-detail" class="map-container"></div>':"","\n  </div>\n")}(t),t.lat&&t.lon){var e=L.map("map-detail").setView([t.lat,t.lon],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),L.marker([t.lat,t.lon]).addTo(e).bindPopup(t.name).openPopup()}}},{key:"showError",value:function(t){document.querySelector("#story-detail-container").innerHTML='<p class="error-message">'.concat(t,"</p>")}},{key:"renderFavoriteButton",value:function(t){var e=document.querySelector("#favorite-button-container");e&&(e.innerHTML=t?'\n  <button aria-label="hapus dari favorit" id="favorite-button" class="favorite">\n    <i class="fas fa-heart" aria-hidden="true"></i>\n  </button>\n':'\n  <button aria-label="tambahkan ke favorit" id="favorite-button" class="favorite">\n     <i class="far fa-heart" aria-hidden="true"></i>\n  </button>\n')}},{key:"setupFavoriteButton",value:function(t){var e=document.querySelector("#favorite-button");e&&e.addEventListener("click",t)}}],e&&zt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Jt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Xt(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Xt(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Xt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Xt(l,"constructor",s),Xt(s,"constructor",c),c.displayName="GeneratorFunction",Xt(s,o,"GeneratorFunction"),Xt(l),Xt(l,o,"Generator"),Xt(l,r,function(){return this}),Xt(l,"toString",function(){return"[object Generator]"}),(Jt=function(){return{w:i,m:p}})()}function Xt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xt=function(t,e,n,r){function i(e,n){Xt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Xt(t,e,n,r)}function Yt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function $t(t){var e=function(t){if("object"!=Vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vt(e)?e:e+""}const Zt=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"addStory",value:(n=Jt().m(function t(e){var n,r;return Jt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e.photo){t.n=1;break}return this._view.showErrorAlert("Mohon unggah atau ambil foto terlebih dahulu!"),t.a(2);case 1:return this._view.showLoading(),t.p=2,t.n=3,this._model.addNewStory({description:e.description,photo:e.photo,lat:e.lat?parseFloat(e.lat):void 0,lon:e.lon?parseFloat(e.lon):void 0});case 3:n=t.v,this._view.hideLoading(),n.error?this._view.showErrorAlert(n.message):(this._view.showSuccessNotification("Berhasil!","Cerita Anda telah dipublikasikan."),this._view.navigateToStories()),t.n=5;break;case 4:t.p=4,r=t.v,this._view.hideLoading(),this._view.showErrorAlert("Gagal menambahkan cerita. Silakan coba lagi."),console.error(r);case 5:return t.a(2)}},t,this,[[2,4]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Yt(i,r,o,a,u,"next",t)}function u(t){Yt(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&Qt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ne(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ne(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ne(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ne(l,"constructor",s),ne(s,"constructor",c),c.displayName="GeneratorFunction",ne(s,o,"GeneratorFunction"),ne(l),ne(l,o,"Generator"),ne(l,r,function(){return this}),ne(l,"toString",function(){return"[object Generator]"}),(ee=function(){return{w:i,m:p}})()}function ne(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ne=function(t,e,n,r){function i(e,n){ne(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},ne(t,e,n,r)}function re(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function oe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){re(i,r,o,a,u,"next",t)}function u(t){re(i,r,o,a,u,"throw",t)}a(void 0)})}}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ae(r.key),r)}}function ae(t){var e=function(t){if("object"!=te(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:e+""}const ue=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._stream=null,this._capturedPhotoBlob=null},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Ceritakan Pengalaman Anda</h2>\n        <form id="add-story-form">\n          <div class="form-group">\n            <label for="description">Deskripsi</label>\n            <textarea id="description" name="description" rows="4" required placeholder="Tuliskan momen spesial Anda..."></textarea>\n          </div>\n          <div class="form-group">\n            <label>Unggah Foto</label>\n            <div class="camera-container" id="camera-container" style="display:none;">\n              <video id="video-preview" autoplay></video>\n              <canvas id="canvas" style="display:none;"></canvas>\n              <button type="button" id="capture-button" class="btn btn-primary" style="margin-top: 10px;"><i class="fas fa-camera"></i> Ambil Foto</button>\n            </div>\n            <button type="button" id="activate-camera-button" class="btn btn-secondary"><i class="fas fa-camera"></i> Aktifkan Kamera</button>\n            <p class="separator" style="margin: 15px 0;">atau</p>\n            <input type="file" id="photo-upload" name="photo" accept="image/*" class="form-input-file">\n            <img id="image-preview" src="#" alt="Image preview" style="display:none; max-width: 100%; margin-top: 10px; border-radius: 8px;"/>\n            <p id="photo-status" style="margin-top: 5px; font-size: 0.9em; color: #555;">Belum ada foto terpilih.</p>\n          </div>\n          <div class="form-group map-container">\n            <label>Pilih Lokasi</label>\n            <div id="map-picker"></div>\n            <input type="hidden" id="latitude" name="latitude">\n            <input type="hidden" id="longitude" name="longitude">\n            <p id="location-info" style="margin-top: 8px;">Klik peta untuk menentukan lokasi Anda.</p>\n          </div>\n          <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Kirim Cerita Anda</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=oe(ee().m(function t(){var e,n=this;return ee().w(function(t){for(;;)switch(t.n){case 0:e=new Zt({view:this,model:p}),window.addEventListener("hashchange",this.cleanup.bind(this),{once:!0}),this._setupCamera(),this._setupFileUpload(),this._setupMapPicker(),document.getElementById("add-story-form").addEventListener("submit",function(t){t.preventDefault(),e.addStory(n._getFormData())});case 1:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"showLoading",value:function(){W()}},{key:"hideLoading",value:function(){V()}},{key:"showSuccessNotification",value:function(t,e){J(t,e)}},{key:"showErrorAlert",value:function(t){alert(t)}},{key:"navigateToStories",value:function(){setTimeout(function(){X(),window.location.hash="#/stories"},2e3)}},{key:"cleanup",value:function(){this._stream&&this._stream.getTracks().forEach(function(t){return t.stop()})}},{key:"_getFormData",value:function(){var t=document.getElementById("description").value,e=document.getElementById("latitude").value,n=document.getElementById("longitude").value,r=document.getElementById("photo-upload"),o=null;return this._capturedPhotoBlob?o=this._capturedPhotoBlob:r.files&&r.files[0]&&(o=r.files[0]),{description:t,photo:o,lat:e,lon:n}}},{key:"_setupCamera",value:function(){var t=this,e=document.querySelector("#activate-camera-button"),n=document.querySelector("#capture-button"),r=document.querySelector("#video-preview"),o=document.querySelector("#canvas"),i=document.querySelector("#camera-container"),a=document.querySelector("#photo-upload"),u=document.querySelector("#image-preview"),c=document.querySelector("#photo-status");e.addEventListener("click",oe(ee().m(function n(){return ee().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!t._stream){n.n=1;break}return t._stream.getTracks().forEach(function(t){return t.stop()}),r.srcObject=null,i.style.display="none",e.innerHTML='<i class="fas fa-camera"></i> Aktifkan Kamera',t._capturedPhotoBlob=null,n.a(2);case 1:return n.p=1,t.showLoading(),n.n=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:t._stream=n.v,r.srcObject=t._stream,i.style.display="block",e.innerHTML='<i class="fas fa-stop-circle"></i> Matikan Kamera',a.style.display="none",u.style.display="none",c.textContent="Menggunakan kamera...",n.n=4;break;case 3:n.p=3,n.v,t.showErrorAlert("Tidak bisa mengakses kamera. Mohon izinkan akses kamera.");case 4:return n.p=4,t.hideLoading(),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))),n.addEventListener("click",function(){if(t._stream){var n=o.getContext("2d");o.width=r.videoWidth,o.height=r.videoHeight,n.drawImage(r,0,0,o.width,o.height),u.src=o.toDataURL("image/jpeg"),u.style.display="block",c.textContent="Foto dari kamera berhasil diambil.",o.toBlob(function(e){t._capturedPhotoBlob=e},"image/jpeg"),t._stream.getTracks().forEach(function(t){return t.stop()}),r.srcObject=null,t._stream=null,i.style.display="none",e.innerHTML='<i class="fas fa-camera"></i> Aktifkan Kamera',a.style.display="block"}})}},{key:"_setupFileUpload",value:function(){var t=document.querySelector("#photo-upload"),e=document.querySelector("#image-preview"),n=document.querySelector("#photo-status");t.addEventListener("change",function(){this.files&&this.files[0]&&(e.style.display="block",e.src=URL.createObjectURL(this.files[0]),n.textContent="File terpilih: ".concat(this.files[0].name),this._capturedPhotoBlob=null)}.bind(this))}},{key:"_setupMapPicker",value:function(){var t=L.map("map-picker").setView([-6.2,106.816666],5),e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});e.addTo(t);var r={Street:e,Satellite:n};L.control.layers(r).addTo(t);var o=null,i=document.querySelector("#latitude"),a=document.querySelector("#longitude"),u=document.querySelector("#location-info");t.on("click",function(e){o&&t.removeLayer(o),o=L.marker(e.latlng).addTo(t),i.value=e.latlng.lat,a.value=e.latlng.lng,u.innerHTML="📍 Lokasi terpilih: Lat ".concat(e.latlng.lat.toFixed(6),", Lon ").concat(e.latlng.lng.toFixed(6)),u.style.color="green"})}}],e&&ie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function se(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return fe(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(fe(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,fe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,fe(l,"constructor",s),fe(s,"constructor",c),c.displayName="GeneratorFunction",fe(s,o,"GeneratorFunction"),fe(l),fe(l,o,"Generator"),fe(l,r,function(){return this}),fe(l,"toString",function(){return"[object Generator]"}),(se=function(){return{w:i,m:p}})()}function fe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fe=function(t,e,n,r){function i(e,n){fe(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},fe(t,e,n,r)}function le(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ye(r.key),r)}}function ye(t){var e=function(t){if("object"!=ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:e+""}const ve=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"login",value:(n=se().m(function t(e){var n,r,o;return se().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.email,r=e.password,this._view.showLoading(),t.p=1,t.n=2,this._model.login({email:n,password:r});case 2:o=t.v,this._view.hideLoading(),o.error?this._view.showErrorAlert(o.message):(this._view.showSuccessNotification("Berhasil Masuk","Mengalihkan ke halaman utama..."),this._view.navigateToHome()),t.n=4;break;case 3:t.p=3,t.v,this._view.hideLoading(),this._view.showErrorAlert("Login gagal. Silakan coba lagi.");case 4:return t.a(2)}},t,this,[[1,3]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){le(i,r,o,a,u,"next",t)}function u(t){le(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function be(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return he(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(he(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,he(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,he(l,"constructor",s),he(s,"constructor",c),c.displayName="GeneratorFunction",he(s,o,"GeneratorFunction"),he(l),he(l,o,"Generator"),he(l,r,function(){return this}),he(l,"toString",function(){return"[object Generator]"}),(be=function(){return{w:i,m:p}})()}function he(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}he=function(t,e,n,r){function i(e,n){he(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},he(t,e,n,r)}function me(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,we(r.key),r)}}function we(t){var e=function(t){if("object"!=de(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==de(e)?e:e+""}const Se=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Login to OurStory</h2>\n        <form id="login-form">\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" name="password" required>\n          </div>\n          <button type="submit" class="btn btn-primary">Login</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=be().m(function t(){var e;return be().w(function(t){for(;;)switch(t.n){case 0:e=new ve({view:this,model:p}),document.getElementById("login-form").addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("email").value,r=document.getElementById("password").value;e.login({email:n,password:r})});case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){me(i,r,o,a,u,"next",t)}function u(t){me(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showLoading",value:function(){W()}},{key:"hideLoading",value:function(){V()}},{key:"showSuccessNotification",value:function(t,e){J(t,e)}},{key:"navigateToHome",value:function(){setTimeout(function(){X(),window.location.hash="#/",location.reload()},2e3)}},{key:"showErrorAlert",value:function(t){alert(t)}}],e&&ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Oe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return je(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(je(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,je(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,je(l,"constructor",s),je(s,"constructor",c),c.displayName="GeneratorFunction",je(s,o,"GeneratorFunction"),je(l),je(l,o,"Generator"),je(l,r,function(){return this}),je(l,"toString",function(){return"[object Generator]"}),(Oe=function(){return{w:i,m:p}})()}function je(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}je=function(t,e,n,r){function i(e,n){je(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},je(t,e,n,r)}function _e(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Te(r.key),r)}}function Te(t){var e=function(t){if("object"!=ke(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ke(e)?e:e+""}const Ee=function(){return t=function t(e){var n=e.view,r=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=n,this._model=r},e=[{key:"register",value:(n=Oe().m(function t(e){var n,r,o,i;return Oe().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.name,r=e.email,o=e.password,t.p=1,t.n=2,this._model.register({name:n,email:r,password:o});case 2:(i=t.v).error?this._view.showErrorAlert(i.message):(this._view.showSuccessAlert("Registrasi berhasil! Silakan login."),this._view.navigateToLogin()),t.n=4;break;case 3:t.p=3,t.v,this._view.showErrorAlert("Registrasi gagal. Silakan coba lagi.");case 4:return t.a(2)}},t,this,[[1,3]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){_e(i,r,o,a,u,"next",t)}function u(t){_e(i,r,o,a,u,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})}],e&&Pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function xe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Le(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Le(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Le(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Le(l,"constructor",s),Le(s,"constructor",c),c.displayName="GeneratorFunction",Le(s,o,"GeneratorFunction"),Le(l),Le(l,o,"Generator"),Le(l,r,function(){return this}),Le(l,"toString",function(){return"[object Generator]"}),(xe=function(){return{w:i,m:p}})()}function Le(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Le=function(t,e,n,r){function i(e,n){Le(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Le(t,e,n,r)}function Fe(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ae(r.key),r)}}function Ae(t){var e=function(t){if("object"!=Ge(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ge(e)?e:e+""}const Ie=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="form-container">\n        <h2>Register for OurStory</h2>\n        <form id="register-form">\n          <div class="form-group">\n            <label for="name">Name</label>\n            <input type="text" id="name" name="name" required>\n          </div>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" name="password" minlength="8" required>\n          </div>\n          <button type="submit" class="btn btn-primary">Register</button>\n        </form>\n      </div>\n    '}},{key:"afterRender",value:(n=xe().m(function t(){var e;return xe().w(function(t){for(;;)switch(t.n){case 0:e=new Ee({view:this,model:p}),document.getElementById("register-form").addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("name").value,r=document.getElementById("email").value,o=document.getElementById("password").value;e.register({name:n,email:r,password:o})});case 1:return t.a(2)}},t,this)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Fe(i,r,o,a,u,"next",t)}function u(t){Fe(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})},{key:"showSuccessAlert",value:function(t){alert(t)}},{key:"showErrorAlert",value:function(t){alert(t)}},{key:"navigateToLogin",value:function(){window.location.hash="#/login"}}],e&&Be(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Me(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return De(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(De(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,De(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,De(l,"constructor",s),De(s,"constructor",c),c.displayName="GeneratorFunction",De(s,o,"GeneratorFunction"),De(l),De(l,o,"Generator"),De(l,r,function(){return this}),De(l,"toString",function(){return"[object Generator]"}),(Me=function(){return{w:i,m:p}})()}function De(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}De=function(t,e,n,r){function i(e,n){De(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},De(t,e,n,r)}function Ne(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function qe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ne(i,r,o,a,u,"next",t)}function u(t){Ne(i,r,o,a,u,"throw",t)}a(void 0)})}}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Re(r.key),r)}}function Re(t){var e=function(t){if("object"!=Ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ce(e)?e:e+""}function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function ze(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ke(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Ke(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ke(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ke(l,"constructor",s),Ke(s,"constructor",c),c.displayName="GeneratorFunction",Ke(s,o,"GeneratorFunction"),Ke(l),Ke(l,o,"Generator"),Ke(l,r,function(){return this}),Ke(l,"toString",function(){return"[object Generator]"}),(ze=function(){return{w:i,m:p}})()}function Ke(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ke=function(t,e,n,r){function i(e,n){Ke(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Ke(t,e,n,r)}function We(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Ve(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){We(i,r,o,a,u,"next",t)}function u(t){We(i,r,o,a,u,"throw",t)}a(void 0)})}}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xe(r.key),r)}}function Xe(t){var e=function(t){if("object"!=He(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==He(e)?e:e+""}function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Qe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return $e(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):($e(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,$e(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,$e(l,"constructor",s),$e(s,"constructor",c),c.displayName="GeneratorFunction",$e(s,o,"GeneratorFunction"),$e(l),$e(l,o,"Generator"),$e(l,r,function(){return this}),$e(l,"toString",function(){return"[object Generator]"}),(Qe=function(){return{w:i,m:p}})()}function $e(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$e=function(t,e,n,r){function i(e,n){$e(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},$e(t,e,n,r)}function Ze(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,en(r.key),r)}}function en(t){var e=function(t){if("object"!=Ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:e+""}const nn={"/":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=qe(Me().m(function t(){return Me().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="home-container">\n        <h1>Masuki Dunia Penuh Cerita Kami</h1>\n        <p>Jelajahi berbagai pengalaman atau bagikan ceritamu sendiri.</p>\n        <div class="home-buttons">\n          <a href="#/stories" class="btn btn-primary"><i class="fas fa-book-open"></i> Jelajahi Cerita</a>\n          <a href="#/add-story" class="btn btn-secondary"><i class="fas fa-plus-circle"></i> Buat Cerita Baru</a>\n        </div>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=qe(Me().m(function t(){return Me().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)})),function(){return n.apply(this,arguments)})}],e&&Ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),"/stories":nt,"/story/:id":Wt,"/add-story":ue,"/about":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=Ve(ze().m(function t(){return ze().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="about-container">\n        <div class="about-header">\n          <h2>Tentang OurStory</h2>\n          <p>Bagikan dan jelajahi cerita dari seluruh penjuru dunia.</p>\n        </div>\n        <div class="about-features">\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-camera-retro"></i></div>\n            <h3>Bagikan Momen Anda</h3>\n            <p>Unggah cerita Anda dengan mudah, baik melalui unggahan file langsung maupun menggunakan kamera perangkat Anda.</p>\n          </div>\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-map-marked-alt"></i></div>\n            <h3>Tandai Lokasi</h3>\n            <p>Sematkan lokasi pada setiap cerita Anda dengan memilih titik di peta interaktif kami untuk memberikan konteks geografis.</p>\n          </div>\n          <div class="feature-card">\n            <div class="feature-icon"><i class="fas fa-globe-asia"></i></div>\n            <h3>Jelajahi Dunia</h3>\n            <p>Lihat semua cerita dari pengguna lain yang tersebar di seluruh dunia melalui tampilan peta yang komprehensif.</p>\n          </div>\n        </div>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=Ve(ze().m(function t(){return ze().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)})),function(){return n.apply(this,arguments)})}],e&&Je(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),"/login":Se,"/register":Ie,"/favorites":function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="content">\n        <h2 class="content__heading">Cerita Favorit Anda</h2>\n        <div id="stories-list" class="stories-list"></div>\n      </div>\n    '}},{key:"afterRender",value:(n=Qe().m(function t(){var e,n;return Qe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Nt.getAllStories();case 1:e=t.v,n=document.querySelector("#stories-list"),0===e.length?n.innerHTML='\n        <p class="empty-message">Anda belum memiliki cerita favorit.</p>\n      ':e.forEach(function(t){n.innerHTML+=H(t)});case 2:return t.a(2)}},t)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Ze(i,r,o,a,u,"next",t)}function u(t){Ze(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})}],e&&tn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}()};function rn(t){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(t)}function on(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return an(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(an(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,an(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,an(l,"constructor",s),an(s,"constructor",c),c.displayName="GeneratorFunction",an(s,o,"GeneratorFunction"),an(l),an(l,o,"Generator"),an(l,r,function(){return this}),an(l,"toString",function(){return"[object Generator]"}),(on=function(){return{w:i,m:p}})()}function an(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}an=function(t,e,n,r){function i(e,n){an(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},an(t,e,n,r)}function un(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sn(r.key),r)}}function sn(t){var e=function(t){if("object"!=rn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rn(e)?e:e+""}const fn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:function(){return'\n      <div class="not-found-container" style="text-align: center; padding: 4rem 1rem;">\n        <h2>404 - Halaman Tidak Ditemukan</h2>\n        <p>Maaf, halaman yang Anda cari tidak ada. Kembali ke <a href="#/">halaman utama</a>.</p>\n      </div>\n    '}},{key:"afterRender",value:(n=on().m(function t(){return on().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){un(i,r,o,a,u,"next",t)}function u(t){un(i,r,o,a,u,"throw",t)}a(void 0)})},function(){return r.apply(this,arguments)})}],e&&cn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function pn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return yn(s,"_invoke",function(n,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,u=0,c=t,p.n=n,a}};function y(n,r){for(u=n,c=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(e=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){i=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(yn(e={},r,function(){return this}),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,yn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,yn(l,"constructor",s),yn(s,"constructor",c),c.displayName="GeneratorFunction",yn(s,o,"GeneratorFunction"),yn(l),yn(l,o,"Generator"),yn(l,r,function(){return this}),yn(l,"toString",function(){return"[object Generator]"}),(pn=function(){return{w:i,m:p}})()}function yn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}yn=function(t,e,n,r){function i(e,n){yn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},yn(t,e,n,r)}function vn(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function dn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){vn(i,r,o,a,u,"next",t)}function u(t){vn(i,r,o,a,u,"throw",t)}a(void 0)})}}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hn(r.key),r)}}function hn(t){var e=function(t){if("object"!=ln(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ln(e)?e:e+""}var mn=new(function(){return e=function t(e){var n=e.content;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._content=n},n=[{key:"renderPage",value:(r=dn(pn().m(function e(){var n,r,i,a=this;return pn().w(function(e){for(;;)switch(e.n){case 0:if(n=o(),t.isUserLoggedIn()||["/login","/register"].includes(n)){e.n=1;break}return window.location.hash="#/login",e.a(2);case 1:if(r=new(nn[n]||fn),i=function(){var t=dn(pn().m(function t(){return pn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.render();case 1:return a._content.innerHTML=t.v,t.n=2,r.afterRender();case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),!document.startViewTransition){e.n=2;break}document.startViewTransition(i),e.n=3;break;case 2:return e.n=3,i();case 3:return e.a(2)}},e)})),function(){return r.apply(this,arguments)})}],n&&bn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}())({content:document.querySelector("#main-content")});window.addEventListener("hashchange",function(){mn.renderPage()}),window.addEventListener("load",function(){mn.renderPage(),G(),h.init(),A.init()})})()})();